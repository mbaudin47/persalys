linux:
  script:
    - docker build docker/linux -t linux
    - docker run --volume `pwd`:/tmp/otgui linux sh -c "/tmp/otgui/docker/linux/run_docker_build.sh"
    - docker cp `docker ps -l -q`:/tmp/build/otgui-x86_64.AppImage .
  except:
    - tags

mingw:
  script:
    - docker build docker/mingw -t mingw
    - docker run --volume `pwd`:/tmp/otgui mingw sh -c "/tmp/otgui/docker/mingw/run_docker_build.sh"
    - docker cp `docker ps -l -q`:/tmp/build/otgui-4.0dev-py2.7-i686.exe .
  except:
    - tags

linux-tag:
  script:
    - docker build docker/linux -t linux
    - docker run --volume `pwd`:/tmp/otgui linux sh -c "/tmp/otgui/docker/linux/run_docker_build.sh"
    - docker cp `docker ps -l -q`:/tmp/build/otgui-x86_64.AppImage .
  artifacts:
    paths:
      - otgui*.AppImage
  only:
    - tags

mingw-tag:
  script:
    - docker build docker/mingw -t mingw
    - docker run --volume `pwd`:/tmp/otgui mingw sh -c "/tmp/otgui/docker/mingw/run_docker_build.sh"
    - docker cp `docker ps -l -q`:/tmp/build/otgui-4.0dev-py2.7-i686.exe .
  artifacts:
    paths:
      - otgui*.exe
  only:
    - tags
