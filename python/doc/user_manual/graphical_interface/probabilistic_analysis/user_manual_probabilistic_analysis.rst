====================================
User manual - Probabilistic analysis
====================================

1- Probabilistic study
======================

In order to perform probabilistic analysis, the user needs first to build a
probabilistic model by using the contextual menu of the probabilistic study in
the study tree. Only one probabilistic model can be defined by physical model.

The probabilistic model has two tabs:

- the tab **Marginals**
    .. image:: /user_manual/graphical_interface/probabilistic_analysis/probabilisticModelMarginals.png
        :align: center

    The use has to choose which variables are to be modelled by random variables
    thanks to the check box. For random variables, the user has to define which
    distribution they follow.

    On the right, the parameters of the distribution
    can be filled, together with truncation parameters.

    Some distributions allows the user to define different type of parameterization.

- the tab **Correlation**

    .. image:: /user_manual/graphical_interface/probabilistic_analysis/probabilisticModelCorrelation.png
        :align: center

    The user may define correlation between the variables by modifying the upper triangular
    part of the matrix. OTGui handles automatically the symmetry of the correlation
    matrix. By default all variables are set independent.


2- Limit state
==============

2-1 Definition
''''''''''''''

A new limit state can be created thanks to the contextual menu of the previously
created probabilistic model.

.. image:: /user_manual/graphical_interface/probabilistic_analysis/limitState.png
    :align: center

In the corresponding window, the user has to define the threshold defining the
failure domain corresponding to the selected output. The available operators to
define the failure event are:

- <= (less or equal)
- >= (greater or equal)
- > (greater than)
- < (less than)

2-2 Threshold exceedance analysis
'''''''''''''''''''''''''''''''''
Definition
~~~~~~~~~~

The user can compute the probability of failure relative to the limit state through
the contextual menu of the relevant limit state

.. image:: /user_manual/graphical_interface/probabilistic_analysis/limitStateReliabilityAnalysis.png
    :align: center

The method used is the well-known crude Monte Carlo sampling. The user has to define:

- The sampling size;
- The maximum coefficient of variation for the probability.

In the advanced parameters (default: hidden), the user may also set:

- The seed of the random generator (default: 0);
- The block size (i.e. number of runs launched at the same time) for parallelization purpose.

Results
~~~~~~~

The result window has 3 tabs:

- The tab **Summary** gathers:
    - The output used for the probability estimation;
    - The number of simulations (i.e. calls to the physical model) performed;
    - The failure probability, its coefficient of variation and the corresponding
      confidence interval Ã  95%

    .. image:: /user_manual/graphical_interface/probabilistic_analysis/limitStateReliabilitySummary.png
        :align: center
    
- The tab **Histogram** presents the histogram of the output sample.

  The user can configure the histogram plot with the graphic configuration
  (below the study tree).

  .. image:: /user_manual/graphical_interface/probabilistic_analysis/limitStateReliabilityHistogram.png
      :align: center

- The tab **Convergence graph** presents the convergence of the Monte Carlo
  algorithm.

  The user can configure the convergence plot with the graphic
  configuration (below the study tree).

  .. image:: /user_manual/graphical_interface/probabilistic_analysis/limitStateReliabilityConvergence.png
          :align: center

3- Central tendency analysis
============================

3-1 Definition
''''''''''''''

New central tendency analysis can be created thanks to be contextual menu of the
probabilistic model. Two methods are available:

- Monte carlo sampling
- Taylor expansions (second order)

Monte Carlo
~~~~~~~~~~~

.. image:: /user_manual/graphical_interface/probabilistic_analysis/centralTendency.png
    :align: center

The user needs to define the number of simulations. In the advanced parameters,
the user can choose:

- To compute the confidence interval thanks to the checkbox (default: selected)
  at the given level;
- To set the seed of the random generator (default: 0).

Taylor expansions
~~~~~~~~~~~~~~~~~

.. image:: /user_manual/graphical_interface/probabilistic_analysis/centralTendencyTaylor.png
    :align: center


3-2 Results
'''''''''''

Monte Carlo
~~~~~~~~~~~

The results window gathers 7 tabs:

- The tab **Result table** presents the sample generated by the Monte Carlo sampling
  method and the resulting output values.

  .. image:: /user_manual/graphical_interface/probabilistic_analysis/centralTendencyTable.png
      :align: center

- The tab **Summary** includes, for a selected output:
    - The number of simulations performed;
    - The minimum and maximum input and output values generated by the Monte Carlo sampling method;
    - The coordinates of the input values which have generated the minimum and maximum
      values of the output;
    - Statistics of the output distribution:
        - Mean and corresponding confidence interval;
        - Standard deviation and corresponding confidence interval;
        - Skewness
        - Kurtosis
        - First quartile
        - Third quartile
    - The probability (resp. quantile) can be defined to compute the corresponding
      quantile (resp. probability) of the output sample distribution.

  .. image:: /user_manual/graphical_interface/probabilistic_analysis/centralTendencySummary.png
      :align: center

- The tab **PDF/CDF** presents the PDF/CDF (default: PDF) of the output sample
  together with a kernel smoothing representation.

  The user can configure the plot and choose between PDF/CDF with the graphic
  configuration (below the study tree).

  .. image:: /user_manual/graphical_interface/probabilistic_analysis/centralTendencyPDF.png
      :align: center

- The tab **Box plots** presents the box plot of the output sample.
  The user can configure the box plot with the graphic configuration
  (below the study tree).

  .. image:: /user_manual/graphical_interface/probabilistic_analysis/centralTendencyBoxplot.png
      :align: center

- The tab **Scatter plots** presents the scatter plot of two parameters (Default:
  first output vs first input). The user can configure the scatter plot with the
  graphic configuration (below the study tree).

  .. image:: /user_manual/graphical_interface/probabilistic_analysis/centralTendencyScatter.png
      :align: center

- The tab **Plot matrix Y-X** presents the scatter plot of each output with respect
  to each input in a matrix plot. The user can configure the matrix plot with
  the graphic configuration (below the study tree).

  .. image:: /user_manual/graphical_interface/probabilistic_analysis/centralTendencyYX.png
      :align: center

- The tab **Plot matrix X-X** gathers:
  - Out of the diagonal the scatter plot of each couple of inputs;
  - The histogram of the distribution of each input on the diagonal.

  .. image:: /user_manual/graphical_interface/probabilistic_analysis/centralTendencyXX.png
      :align: center

Taylor expansions
~~~~~~~~~~~~~~~~~

.. image:: /user_manual/graphical_interface/probabilistic_analysis/centralTendencyTaylorResults.png
    :align: center

The results window gathers, for a given output:

- The output mean corresponding to the first and second order expansions;
- The standard deviation of the output;
- The variance of the output.

4- Sensitivity analysis
=======================

4-1 Definition
''''''''''''''

New sensitivity analysis can be created thanks to the contextual menu of the
probabilistic model.

.. image:: /user_manual/graphical_interface/probabilistic_analysis/sensitivityAnalysis.png
    :align: center

Two type of sensitivity indices are available:
- Sobol' indices
- SRC indices

4-2 Results
'''''''''''

Sobol' indices
~~~~~~~~~~~~~~

.. image:: /user_manual/graphical_interface/probabilistic_analysis/sensitivityAnalysisSobol.png
    :align: center

The results window gathers:

- The first and total order indices plotted for each input variable.
  The user can configure the plot with the graphic configuration (below the 
  study tree).

- A table with the first and total order indices value for each variable.

- The index corresponding to the interactions.

.. |attentionButton| image:: /user_manual/graphical_interface/probabilistic_analysis/task-attention.png

If the Sobol's indices estimates are incoherent, refer to the warning message in the tooltip of |attentionButton|.

SRC indices
~~~~~~~~~~~

.. image:: /user_manual/graphical_interface/probabilistic_analysis/sensitivityAnalysisSRC.png
    :align: center

The results window gathers:

- The SRC index plotted for each input variable.
  The user can configure the plot with the graphic configuration (below the 
  study tree).

- A table with the SRC index value for each variable.

